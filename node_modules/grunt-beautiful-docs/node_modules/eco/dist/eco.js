/**
 * Eco Compiler v1.1.0-pre
 * http://github.com/sstephenson/eco
 *
 * Copyright (c) 2010 Sam Stephenson
 * Released under the MIT License
 */
this.eco=function(h){return function e(f){var d,b={id:f,exports:{}};if(d=h[f]){d(b,e,b.exports);return b.exports}else throw"Cannot find module '"+f+"'";}}({eco:function(h,e){e("coffee-script");h.exports=e("eco/compiler")},"eco/compiler":function(h,e){(function(){var f,d,b,a,c;f=e("coffee-script");c=e("eco/preprocessor").preprocess;a=e("eco/util").indent;h.exports=b=function(g){(new Function("module",d(g)))(g={});return g.exports};b.preprocess=c;b.compile=d=function(g,j){var i,k;i=(k=j!=null?j.identifier:
void 0)!=null?k:"module.exports";i.match(/\./)||(i="var "+i);k=f.compile(c(g),{noWrap:true});return""+i+" = function(__obj) {\n  if (!__obj) __obj = {};\n  var __out = [], __capture = function(callback) {\n    var out = __out, result;\n    __out = [];\n    callback.call(this);\n    result = __out.join('');\n    __out = out;\n    return __safe(result);\n  }, __sanitize = function(value) {\n    if (value && value.ecoSafe) {\n      return value;\n    } else if (typeof value !== 'undefined' && value != null) {\n      return __escape(value);\n    } else {\n      return '';\n    }\n  }, __safe, __objSafe = __obj.safe, __escape = __obj.escape;\n  __safe = __obj.safe = function(value) {\n    if (value && value.ecoSafe) {\n      return value;\n    } else {\n      if (!(typeof value !== 'undefined' && value != null)) value = '';\n      var result = new String(value);\n      result.ecoSafe = true;\n      return result;\n    }\n  };\n  if (!__escape) {\n    __escape = __obj.escape = function(value) {\n      return ('' + value)\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;');\n    };\n  }\n  (function() {\n"+
a(k,4)+"\n  }).call(__obj);\n  __obj.safe = __objSafe, __obj.escape = __escape;\n  return __out.join('');\n};"};b.render=function(g,j){return b(g)(j)};if(e.extensions)e.extensions[".eco"]=function(g,j){var i;i=e("fs").readFileSync(j,"utf-8");return g._compile(d(i),j)};else e.registerExtension&&e.registerExtension(".eco",d)}).call(this)},"eco/preprocessor":function(h,e){(function(){var f,d,b=function(a,c){return function(){return a.apply(c,arguments)}};f=e("eco/scanner");d=e("eco/util");h.exports=
function(){function a(c){this.scanner=new f(c);this.output="";this.level=0;this.options={};this.captures=[]}a.preprocess=function(c){return(new a(c)).preprocess()};a.prototype.preprocess=function(){for(;!this.scanner.done;)this.scanner.scan(b(function(c){return this[c[0]].apply(this,c.slice(1))},this));return this.output};a.prototype.record=function(c){this.output+=d.repeat("  ",this.level);return this.output+=c+"\n"};a.prototype.printString=function(c){if(c.length)return this.record("__out.push "+
d.inspectString(c))};a.prototype.beginCode=function(c){return this.options=c};a.prototype.recordCode=function(c){if(c!=="end")return this.options.print?this.options.safe?this.record("__out.push "+c):this.record("__out.push __sanitize "+c):this.record(c)};a.prototype.indent=function(c){this.level++;if(c){this.record("__capture "+c);this.captures.unshift(this.level);return this.indent()}};a.prototype.dedent=function(){this.level--;this.level<0&&this.fail("unexpected dedent");if(this.captures[0]===this.level){this.captures.shift();
return this.dedent()}};a.prototype.fail=function(c){throw"Parse error on line "+this.scanner.lineNo+": "+c;};return a}()}).call(this)},"eco/scanner":function(h,e){(function(){var f,d;f=e("strscan").StringScanner;d=e("eco/util").trim;h.exports=function(){function b(a){this.source=a.replace(/\r\n?/g,"\n");this.scanner=new f(this.source);this.mode="data";this.buffer="";this.lineNo=1;this.done=false}b.modePatterns={data:/(.*?)(<%%|<%(([=-])?)|\n|$)/,code:/(.*?)(((:|(->|=>))\s*)?%>|\n|$)/};b.dedentablePattern=
/^(end|when|else|catch|finally)(?:\W|$)/;b.scan=function(a){var c;c=[];for(a=new b(a);!a.done;)a.scan(function(g){return c.push(g)});return c};b.prototype.scan=function(a){if(this.done)return a();else if(this.scanner.hasTerminated()){this.done=true;switch(this.mode){case "data":return a(["printString",this.flush()]);case "code":return a(["fail","unexpected end of template"])}}else{this.advance();switch(this.mode){case "data":return this.scanData(a);case "code":return this.scanCode(a)}}};b.prototype.advance=
function(){this.scanner.scanUntil(b.modePatterns[this.mode]);this.buffer+=this.scanner.getCapture(0);this.tail=this.scanner.getCapture(1);this.directive=this.scanner.getCapture(3);return this.arrow=this.scanner.getCapture(4)};b.prototype.scanData=function(a){if(this.tail==="<%%"){this.buffer+="<%";return this.scan(a)}else if(this.tail==="\n"){this.buffer+=this.tail;this.lineNo++;return this.scan(a)}else if(this.tail){this.mode="code";a(["printString",this.flush()]);return a(["beginCode",{print:this.directive!=
null,safe:this.directive==="-"}])}};b.prototype.scanCode=function(a){var c;if(this.tail==="\n")return a(["fail","unexpected newline in code block"]);else if(this.tail){this.mode="data";c=d(this.flush());if(this.arrow)c+=" "+this.arrow;this.isDedentable(c)&&a(["dedent"]);a(["recordCode",c]);if(this.directive)return a(["indent",this.arrow])}};b.prototype.flush=function(){var a;a=this.buffer;this.buffer="";return a};b.prototype.isDedentable=function(a){return a.match(b.dedentablePattern)};return b}()}).call(this)},
"eco/util":function(h,e,f){(function(){var d,b;f.repeat=d=function(a,c){return Array(c+1).join(a)};f.indent=function(a,c){var g,j,i,k,l,m;j=d(" ",c);l=a.split("\n");m=[];i=0;for(k=l.length;i<k;i++){g=l[i];m.push(j+g)}return m.join("\n")};f.trim=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")};b={"\\":"\\\\","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};f.inspectString=function(a){return"'"+a.replace(/[\x00-\x1f\\]/g,function(c){if(c in b)return b[c];else{c=c.charCodeAt(0).toString(16);
if(c.length===1)c="0"+c;return"\\u00"+c}}).replace(/'/g,"\\'")+"'"}}).call(this)},strscan:function(h,e,f){(function(){var d;(typeof f!=="undefined"&&f!==null?f:this).StringScanner=function(){d=function(b){this.source=b.toString();this.reset();return this};d.prototype.scan=function(b){var a;return(a=b.exec(this.getRemainder()))&&a.index===0?this.setState(a,{head:this.head+a[0].length,last:this.head}):this.setState([])};d.prototype.scanUntil=function(b){if(b=b.exec(this.getRemainder())){this.setState(b,
{head:this.head+b.index+b[0].length,last:this.head});return this.source.slice(this.last,this.head)}else return this.setState([])};d.prototype.scanChar=function(){return this.scan(/./)};d.prototype.skip=function(b){if(this.scan(b))return this.match.length};d.prototype.skipUntil=function(b){if(this.scanUntil(b))return this.head-this.last};d.prototype.check=function(b){var a;return(a=b.exec(this.getRemainder()))&&a.index===0?this.setState(a):this.setState([])};d.prototype.checkUntil=function(b){if(b=
b.exec(this.getRemainder())){this.setState(b);return this.source.slice(this.head,this.head+b.index+b[0].length)}else return this.setState([])};d.prototype.peek=function(b){return this.source.substr(this.head,typeof b!=="undefined"&&b!==null?b:1)};d.prototype.getSource=function(){return this.source};d.prototype.getRemainder=function(){return this.source.slice(this.head)};d.prototype.getPosition=function(){return this.head};d.prototype.hasTerminated=function(){return this.head===this.source.length};
d.prototype.getPreMatch=function(){if(this.match)return this.source.slice(0,this.head-this.match.length)};d.prototype.getMatch=function(){return this.match};d.prototype.getPostMatch=function(){if(this.match)return this.source.slice(this.head)};d.prototype.getCapture=function(b){return this.captures[b]};d.prototype.reset=function(){return this.setState([],{head:0,last:0})};d.prototype.terminate=function(){return this.setState([],{head:this.source.length,last:this.head})};d.prototype.concat=function(b){return this.source+=
b};d.prototype.unscan=function(){if(this.match)return this.setState([],{head:this.last,last:0});else throw"nothing to unscan";};d.prototype.setState=function(b,a){var c,g;this.head=typeof(c=typeof a==="undefined"||a===null?undefined:a.head)!=="undefined"&&c!==null?c:this.head;this.last=typeof(g=typeof a==="undefined"||a===null?undefined:a.last)!=="undefined"&&g!==null?g:this.last;this.captures=b.slice(1);return this.match=b[0]};return d}()})()},"coffee-script":function(h){if(typeof CoffeeScript!==
"undefined"&&CoffeeScript!=null)h.exports=CoffeeScript;else throw"Cannot require '"+h.id+"': CoffeeScript not found";}})("eco");
