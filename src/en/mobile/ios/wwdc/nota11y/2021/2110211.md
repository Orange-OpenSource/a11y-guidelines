---
title : "Symbolication: Beyond the basics"
abstract: "Learn how the Symbolication process works and the steps you can take to gain the most insight into your app."

displayToc: true
---

# WWDC 2021: Symbolication - Beyond the basics
Find hereafter a detailed summary of the above named video which belongs to a [taxonomy&nbsp;of&nbsp;some&nbsp;WWDC&nbsp;footages](../../).

The original video is available on the **official Apple website** ([session&nbsp;10211](https://developer.apple.com/videos/play/wwdc2021/10211/)).

![](../../../../../images/iOSdev/wwdc21-10211.png)

"Discover how you can **achieve maximum performance** and insightful debugging with your app. **Symbolication** is at the center of tools such as Instruments and LLDB to help **bridge** the layers **between your application's runtime and your source code**. Learn how this process works and the steps you can take to gain the most insight into your app."

The various contents of this speech are indicated hereunder:
- [The&nbsp;basics](#the-basics)

- [Back&nbsp;to&nbsp;the&nbsp;file](#back-to-the-file)

- [Debug&nbsp;information](#debug-information)

- [Tools&nbsp;&&nbsp;comand&nbsp;lines](#tools-comand-lines)

</br>Most of the illustrations are parts of the Apple presentations and may be available at the `Resources` section inside the `Overview` sheet of each video.
</br>Hereafter, the underlined elements lead directly to the playback of the WWDC video at the appropriate moment.
</br>
## [The&nbsp;basics](https://developer.apple.com/videos/play/wwdc2021/10211/?time=43)

**Symbolication** is the way to make a **connection** between what's happening during runtime in an app and its pairing lines of code that brought it into being.
![](../../../../../images/iOSdev/wwdc21-10211-Basics_1.png)

**[Xcode](https://developer.apple.com/videos/play/wwdc2021/10211/?time=142)** and **[the command lines](https://developer.apple.com/videos/play/wwdc2021/10211/?time=169)** are efficient tools to get a **more workable layout** in order to find out the file name and the line number in the code that gave rise to the highlighted issue.
![](../../../../../images/iOSdev/wwdc21-10211-Basics_2.png)

The symbolication process is divided into [two&nbsp;important&nbsp;phases](https://developer.apple.com/videos/play/wwdc2021/10211/?time=326) that are detailed in the next sections.

![](../../../../../images/iOSdev/wwdc21-10211-Basics_3.png)
</br></br>
## [Back&nbsp;to&nbsp;the&nbsp;file](https://developer.apple.com/videos/play/wwdc2021/10211/?time=352)
The connection between the **on disk addresses** and the **runtime addresses** relies on the creation of some binary groups into **segments** that are loaded into memory by the system to provide the app itself.
</br>The **[Mach-O&nbsp;header](https://developer.apple.com/videos/play/wwdc2021/10211/?time=417)** that contains appropriate commands to handle the segments properties is a **mandatory section** to be read by the system before running an app ([Mach-O](https://github.com/aidansteele/osx-abi-macho-file-format-reference/blob/master/Mach-O_File_Format.pdf) = format used for all executable binaries and libraries).

![](../../../../../images/iOSdev/wwdc21-10211-Back_1.png)

The link between the runtime and the linker addresses depends on a **random value** generated by the kernel called the **[ASLR&nbsp;slide](https://developer.apple.com/videos/play/wwdc2021/10211/?time=468)**.

![](../../../../../images/iOSdev/wwdc21-10211-Back_2.png)

</br></br>
## [Debug&nbsp;information](https://developer.apple.com/videos/play/wwdc2021/10211/?time=800)
When the app is built, Xcode creates the debug information as **the** connection between the source code and the file addresses that includes different sort of info.

![](../../../../../images/iOSdev/wwdc21-10211-Debug.png)
</br>
### [Function starts](https://developer.apple.com/videos/play/wwdc2021/10211/?time=862)
This debug information is just a mean to confirm the existence of a function in code by [providing&nbsp;its&nbsp;address](https://developer.apple.com/videos/play/wwdc2021/10211/?time=884) thanks to the `LC_FUNCTION_STARTS`&nbsp;[command](https://developer.apple.com/videos/play/wwdc2021/10211/?time=898) of the Mach-O header. 

![](../../../../../images/iOSdev/wwdc21-10211-DebugFunctionStarts_1.png)

A [specific&nbsp;command&nbsp;line](https://developer.apple.com/videos/play/wwdc2021/10211/?time=907) is also capable of listing all the functions with their starting address.

![](../../../../../images/iOSdev/wwdc21-10211-DebugFunctionStarts_2.png)

When a **crash log** lacks function names, this debug information may be of a [great&nbsp;help](https://developer.apple.com/videos/play/wwdc2021/10211/?time=928) to find out what **function is involved**.
</br>
### Nlist&nbsp;symbol&nbsp;table
<ul class="nav nav-tabs" role="tablist">
    <li class="nav-item" role="presentation">
        <a class="nav-link active"
           data-bs-toggle="tab" 
           href="#DebugNlistOverview"
           id="DebugNlistOverview_tab"
           role="tab" 
           aria-selected="true">Overview</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#DebugNlistDirectSymbol"
           id="DebugNlistDirectSymbol_tab"
           role="tab" 
           aria-selected="false">Direct&nbsp;symbol</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#DebugNlistDirectIndirectSymbol"
           id="DebugNlistDirectIndirectSymbol_tab"
           role="tab" 
           aria-selected="false">Indirect&nbsp;symbol</a>
    </li>
</ul>

<div class="tab-content">
<div class="tab-pane show active" id="DebugNlistOverview" role="tabpanel">

<a alt="Click to playback the video at the indicated time." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=1006">ðŸŽ¬ (16:46)</a> 

This category of debug information differs from the function starts in the specific way that it supplies a **complete structure of details** that may be of **three different types**.

![](../../../../../images/iOSdev/wwdc21-10211-DebugNlistOverview.png)
</div>

<div class="tab-pane" id="DebugNlistDirectSymbol" role="tabpanel">

<a alt="Click to playback the video at the indicated time." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=1050">ðŸŽ¬ (17:30)</a>

This type gathers both the methods and functions existing in the direct symbol table.

![](../../../../../images/iOSdev/wwdc21-10211-DebugNlistDirect_1.png)

The [nm](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1079) and [symbols](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1121) commands **list the direct symbols** of the project with **readable names** easy to understand.

![](../../../../../images/iOSdev/wwdc21-10211-DebugNlistDirect_2.png)

It's crucial to notice that **all the methods and functions [aren't&nbsp;necessary&nbsp;listed](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1161)** as direct symbols.

![](../../../../../images/iOSdev/wwdc21-10211-DebugNlistDirect_3.png)

To **avoid wasting space** keeping useless symbols, it's necessary to [handle&nbsp;the&nbsp;**build&nbsp;settings**](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1255) in order to manage how the app is stripped during the build.

![](../../../../../images/iOSdev/wwdc21-10211-DebugNlistDirect_4.png)

The [display&nbsp;of&nbsp;command&nbsp;lines](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1299) is a perfect mean to note if some elements may be either never in the direct symbols or simply stripped.

![](../../../../../images/iOSdev/wwdc21-10211-DebugNlistDirect_5.png)
</div>

<div class="tab-pane" id="DebugNlistDirectIndirectSymbol" role="tabpanel">

<a alt="Click to playback the video at the indicated time." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=1367">ðŸŽ¬ (22:47)</a>

![](../../../../../images/iOSdev/wwdc21-10211-DebugNlistIndirect_1.png)

This type regroups both the methods and functions that are **used from other frameworks or libraries**.

![](../../../../../images/iOSdev/wwdc21-10211-DebugNlistIndirect_2.png)
</div>
</div>
</br>

### DWARF
<ul class="nav nav-tabs" role="tablist">
    <li class="nav-item" role="presentation">
        <a class="nav-link active"
           data-bs-toggle="tab" 
           href="#DebugDwarfOverview"
           id="DebugDwarfOverview_tab"
           role="tab" 
           aria-selected="true">Overview</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#DebugDwarfTypes"
           id="DebugDwarfTypes_tab"
           role="tab" 
           aria-selected="false">Types</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#DebugDwarfLine"
           id="DebugDwarfLine_tab"
           role="tab" 
           aria-selected="false">Debug_line</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#DebugDwarfInlining"
           id="DebugDwarfInlining_tab"
           role="tab" 
           aria-selected="false">Inlining</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#DebugDwarfSymbols"
           id="DebugDwarfSymbols_tab"
           role="tab" 
           aria-selected="false">Debugging&nbsp;symbols</a>
    </li>
</ul>

<div class="tab-content">
<div class="tab-pane show active" id="DebugDwarfOverview" role="tabpanel">

<a alt="Click to playback the video at the indicated time." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=1459">ðŸŽ¬ (24:19)</a> 

Originally designed along with **ELF** (**E**xecutable and **L**inkable **F**ormat), **DWARF** (**D**ebugging **W**ith **A**ttributed **R**ecord **F**ormats) is a file format used for debugging support that brings about **more detailed debug information**.

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfOverview.png)
</div>

<div class="tab-pane" id="DebugDwarfTypes" role="tabpanel">

<a alt="Click to playback the video at the indicated time." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=1554">ðŸŽ¬ (25:54)</a> 
![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfTypes_1.png)

A **[subprogram](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1597)** stands for a defined function that is embedded in a compile unit.

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfTypes_2.png)

This **tree representation** can also be analyzed in depth thanks to a [command&nbsp;line&nbsp;return](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1635).

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfTypes_3.png)
</div>

<div class="tab-pane" id="DebugDwarfLine" role="tabpanel">

<a alt="Click to playback the video at the indicated time." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=1692">ðŸŽ¬ (28:12)</a> 

The debug_line stream is the source of the **line table program** that creates a **mapping** between addresses and the corresponding line of code that define the inspected element.

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfLine_1.png)

[Browsing&nbsp;the&nbsp;tree](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1707) is a good way to figure out the **matching of an element**.

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfLine_2.png)

A [command&nbsp;line](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1733) with `atos` including the appropriate parameters leads to the same result.

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfLine_3.png)
</div>

<div class="tab-pane" id="DebugDwarfInlining" role="tabpanel">

<a alt="Click to playback the video at the indicated time." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=1803">ðŸŽ¬ (30:03)</a> 

Inlining is a **routine optimization** performed by the compiler that replaces the function call by the block defining its behavior.

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfInlining_1.png)

A [command&nbsp;line](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1832) with `dwarfdump` can look into some relationships to **point out the inlined subroutines** using the **abstract origin** node.

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfInlining_2.png)
</div>

<div class="tab-pane" id="DebugDwarfSymbols" role="tabpanel">

<a alt="Click to playback the video at the indicated time." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=1914">ðŸŽ¬ (31:54)</a> 

![](../../../../../images/iOSdev/wwdc21-10211-DebugDwarfSymbols.png)
</div>
</div>
</br>

## [Tools&nbsp;&&nbsp;comand&nbsp;lines](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1992)
Besides all the examples provided in the previous sections, some pieces of advice are introduced hereafter to ease symbolication: 

1. Optimize the **build settings** for debugging âŸ¹ [ðŸŽ¬](https://developer.apple.com/videos/play/wwdc2021/10211/?time=1998)

2. Check out the **DSYM existence** and all the **UUIDs** for a specific DSYM âŸ¹ `mdfind` and `symbols` <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=2025">ðŸŽ¬</a>

- Verify the DSYM size doesn't exceed its maximum âŸ¹ <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=2057">ðŸŽ¬</a>

3. Check for **DWARF validity** âŸ¹ `dwarfdump` <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=2043">ðŸŽ¬</a>

4. Cross-check the UUID of the app build and the DSYM's âŸ¹ `symbols` <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=2068">ðŸŽ¬</a>

5. Consult the **types of debug information** âŸ¹ `symbols` <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=2089">ðŸŽ¬</a>

6. Inspect your **entitlements** and your **code signing** âŸ¹ `codesign` <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=2107">ðŸŽ¬</a>

7. Specify the **architecture for Universal 2** apps âŸ¹ `atos`, `nm`, `otool` and `symbol` <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=2152">ðŸŽ¬</a>

8. Display the **load commands** located in the Mach-O header âŸ¹ `otool` <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=448">ðŸŽ¬</a>

9. Evaluate the ASLR slide âŸ¹ `atos` <a alt="Click to playback the video footage." href="https://developer.apple.com/videos/play/wwdc2021/10211/?time=656">ðŸŽ¬</a>

<ul class="nav nav-tabs" role="tablist">
    <li class="nav-item" role="presentation">
        <a class="nav-link active"
           data-bs-toggle="tab" 
           href="#ToolsAndTips1"
           id="ToolsAndTips1_tab"
           role="tab" 
           aria-selected="true">1</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#ToolsAndTips2"
           id="ToolsAndTips2_tab"
           role="tab" 
           aria-selected="false">2</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#ToolsAndTips3"
           id="ToolsAndTips3_tab"
           role="tab" 
           aria-selected="false">3</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#ToolsAndTips4"
           id="ToolsAndTips4_tab"
           role="tab" 
           aria-selected="false">4</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#ToolsAndTips5"
           id="ToolsAndTips5_tab"
           role="tab" 
           aria-selected="false">5</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#ToolsAndTips6"
           id="ToolsAndTips6_tab"
           role="tab" 
           aria-selected="false">6</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#ToolsAndTips7"
           id="ToolsAndTips7_tab"
           role="tab" 
           aria-selected="false">7</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#ToolsAndTips8"
           id="ToolsAndTips8_tab"
           role="tab" 
           aria-selected="false">8</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link"
           data-bs-toggle="tab" 
           href="#ToolsAndTips9"
           id="ToolsAndTips9_tab"
           role="tab" 
           aria-selected="false">9</a>
    </li>
    </ul>

<div class="tab-content">
<div class="tab-pane show active" id="ToolsAndTips1" role="tabpanel"> 
    
![](../../../../../images/iOSdev/wwdc21-10211-Tools_1.png)
</div>

<div class="tab-pane" id="ToolsAndTips2" role="tabpanel"> 

![](../../../../../images/iOSdev/wwdc21-10211-Tools_2.png) 
</div>

<div class="tab-pane" id="ToolsAndTips3" role="tabpanel"> 

![](../../../../../images/iOSdev/wwdc21-10211-Tools_3.png) 
</div>

<div class="tab-pane" id="ToolsAndTips4" role="tabpanel"> 
    
![](../../../../../images/iOSdev/wwdc21-10211-Tools_4.png)
</div>

<div class="tab-pane" id="ToolsAndTips5" role="tabpanel"> 

![](../../../../../images/iOSdev/wwdc21-10211-Tools_5.png)
</div>

<div class="tab-pane" id="ToolsAndTips6" role="tabpanel"> 

![](../../../../../images/iOSdev/wwdc21-10211-Tools_6.png) 
</div>

<div class="tab-pane" id="ToolsAndTips7" role="tabpanel"> 

![](../../../../../images/iOSdev/wwdc21-10211-Tools_7.png) 
</div>

<div class="tab-pane" id="ToolsAndTips8" role="tabpanel"> 

![](../../../../../images/iOSdev/wwdc21-10211-Tools_8.png) 
</div>

<div class="tab-pane" id="ToolsAndTips9" role="tabpanel"> 

![](../../../../../images/iOSdev/wwdc21-10211-Tools_9.png) 
</div>
</div>

</br></br>

![](../../../../../images/iOSdev/wwdc21-10211-WrapUp.png)
</br></br></br>