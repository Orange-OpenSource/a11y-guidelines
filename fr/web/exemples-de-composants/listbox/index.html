<!doctype html>
<html lang="fr" dir="ltr" class="no-js">
  <head>
    <meta charset="utf-8">
    <title>Les listbox - Recommandations accessibilité numérique Orange</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://code.jquery.com" crossorigin="anonymous">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/HelvNeue55_W1G.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/HelvNeue75_W1G.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="/assets/images/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/assets/images/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="mask-icon" href="/assets/images/safari-pinned-tab.svg" color="#563d7c">
    <link rel="icon" href="/assets/images/favicon.ico">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boosted@4.6.0/dist/css/boosted.min.css" integrity="sha384-gqlCljYk+czxYG/OEUHPObOqdFdx4RFpXrAy+z6dbWdeD1ybOujFGA+lKVLnXtxx" crossorigin="anonymous">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.1/build/styles/a11y-light.min.css">
    
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/tarteaucitron-boosted.css"><link rel="stylesheet" href="style.css"></head>
  <body>
    

<header role="banner">
  <div class="navbar navbar-dark navbar-expand supra">
    <div class="container-lg">
      <nav role="navigation" aria-label="Liens d&#39;évitements">
  <ul class="navbar-nav"><li class="nav-item">
        <a href="#main-menu" class="nav-link">Aller au menu</a>
      </li><li class="nav-item">
        <a href="#main-content" class="nav-link">Aller au contenu</a>
      </li><li class="nav-item">
        <a href="#footer" class="nav-link">Aller au pied de page</a>
      </li></ul>
</nav>

      <nav role="navigation" aria-label="Changement de langue">
  <ul class="navbar-nav">
      <li class="nav-item">
        <a href="/en/" class="nav-link" lang="en">
        English
        </a>
      </li>
      <li class="nav-item">
        <a href="/fr/" class="nav-link active" aria-current="true" lang="fr">
        Français
        </a>
      </li></ul>
</nav>
    </div>
  </div>
  

<div class="navbar navbar-dark navbar-expand-md">
  <nav id="main-menu" class="container-lg justify-content-md-start" role="navigation" aria-label="Navigation principale">
    <a href="/fr" class="navbar-brand" title="Orange, aller à l’accueil">
      <img src="/assets/images/orange-logo.svg" alt="Orange, aller à l’accueil" width="50" height="50">
    </a>

    <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#main-menu-list" aria-controls="main-menu-list" aria-expanded="false" aria-label="Menu de navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <ul id="main-menu-list" class="navbar-nav navbar-collapse collapse"><li class="nav-item">
          <a href="/fr/" class="nav-link">
  Accueil
</a>
        </li><li class="nav-item">
          <a href="/fr/cadrage/" class="nav-link">
  Cadrage
</a>
        </li><li class="nav-item">
          <a href="/fr/web/" class="nav-link active" aria-current="true">
  Web
</a>
        </li><li class="nav-item">
          <a href="/fr/mobile/android/" class="nav-link">
  Android
</a>
        </li><li class="nav-item">
          <a href="/fr/mobile/ios/" class="nav-link">
  iOS
</a>
        </li><li class="nav-item">
          <a href="/fr/contenu-editorial/" class="nav-link">
  Contenu éditorial
</a>
        </li><li class="nav-item">
          <a href="/fr/articles/" class="nav-link">
  Articles
</a>
        </li><li class="nav-item d-md-none">
  <span class="sr-only">Changement de langue</span>
  <ul class="d-flex list-inline">
      <li class="list-inline-item flex-grow-1">
        <a href="/en/" class="nav-link" lang="en">
        English
        </a>
      </li>
      <li class="list-inline-item flex-grow-1">
        <a href="/fr/" class="nav-link active" aria-current="true" lang="fr">
        Français
        </a>
      </li></ul>
</li>
    </ul>
  </nav>
</div>

  <nav id="secondary-navigation" class="o-nav-local navbar-light mb-1" role="navigation" aria-label="Navigation secondaire">
  <div class="container-lg">
    <ul class="nav"><li class="nav-item">
              <a href="/fr/web/designer/" class="nav-link">
  Designer
</a>
            </li><li class="nav-item">
              <a href="/fr/web/developper/" class="nav-link">
  Développer
</a>
            </li><li class="nav-item">
              <a href="/fr/web/tester/" class="nav-link">
  Tester
</a>
            </li><li class="nav-item">
              <a href="/fr/web/audit-wcag/" class="nav-link">
  Évaluer
</a>
            </li><li class="nav-item">
              <a href="/fr/web/outils/" class="nav-link">
  Boite à outils
</a>
            </li><li class="nav-item">
              <a href="/fr/web/exemples-de-composants/" class="nav-link active" aria-current="true">
  Exemples de composants
</a>
            </li></ul>
  </div>
</nav>
</header>

    <div class="container-lg pt-2">
      
      
        

<nav role="navigation" aria-labelledby="breadcrumb-label">
  <p id="breadcrumb-label" class="sr-only">Vous êtes ici&amp;nbsp;:</p>
  <ol class="breadcrumb">
      
        <li class="breadcrumb-item d-none d-sm-flex">
          <a href="/fr/">Accueil</a>
        </li>
      
      
        <li class="breadcrumb-item d-none d-sm-flex">
          <a href="/fr/web/">Web</a>
        </li>
      
      
        <li class="breadcrumb-item">
          <a href="/fr/web/exemples-de-composants/">Exemples de composants</a>
        </li>
      
      
        <li class="breadcrumb-item d-none d-sm-flex" aria-current="location">
          Les listbox
        </li>
      </ol>
</nav>

      
      <div class="MobileDropdownNavigationContainer d-flex flex-column flex-sm-row justify-content-between">
        
        
      </div>
    </div>
    
  <main id="main-content" class="container-lg pt-4" role="main">
      
<h1>Les listes <abbr>ARIA</abbr> (<i lang="en">listbox</i>)</h1>

<h2>Introduction</h2>
<p><abbr>ARIA</abbr> met à disposition un grand nombre de composants qui peuvent servir dans les interfaces riches (onglet, accordéon, potentiomètre (<i lang="en">slider</i>)…). Dans cet exemple, nous allons nous intéresser à l’utilisation des <i lang="en">listbox</i>.</p>
<p>Une <i lang="en">listbox</i> est un composant qui permet à l’utilisateur de sélectionner un ou plusieurs éléments à partir d’une liste de choix.</p>
<p>Les éléments d’une <i lang="en">listbox</i> sont statiques, une <i lang="en">listbox</i> n’est pas destinée à recevoir des éléments interactifs (tels que des liens, des boutons…), en revanche celle-ci peut contenir des images à l’inverse d’un <code>select</code>.</p>
<p>Plus d’infos&nbsp;: <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#Listbox" hreflang="en" lang="en"><abbr>WAI</abbr>-<abbr>ARIA</abbr> Authoring Practices</a>.</p>

<h2>Mise en garde</h2>
<p>Bien que des progrès soient réalisés à chaque nouvelle version, le support de l’<abbr>ARIA</abbr> est encore partiel pour l’ensemble des lecteurs d’écran. Son utilisation doit être conditionnée par des tests de compatibilité sur l’environnement cible (couple navigateur/lecteur d’écran).</p>

<h2>Mise en place</h2>

<h3>Code <abbr>HTML</abbr></h3>
<p>Pour créer une <i lang="en">listbox</i>, il suffit d’appliquer le rôle <code>listbox</code> à un conteneur parent. Puis d’appliquer le rôle <code>option</code> aux différentes options de la liste. On n’oubliera pas de rendre cette liste focusable pour les utilisateurs qui naviguent à l’aide du clavier (ajout d’un attribut <code>tabindex="0"</code>) ni d’ajouter un label (<code>aria-label</code> ou <code>aria-labelledby</code>) pour les personnes qui utilisent un lecteur d’écran. Enfin, on ajoutera également un attribut <code>tabindex="-1"</code> aux options pour qu’elles puissent recevoir le focus via Javascript.</p>

<pre><code class="html">
&lt;ul role="listbox" tabindex="0" aria-label="liste des dossiers"&gt;
  &lt;li tabindex="-1" role="option"&gt;Boite de réception (4) &lt;span class="sr-only"&gt;messages non lus&lt;/span&gt;&lt;/li&gt;
  &lt;li tabindex="-1" role="option"&gt;Eléments envoyés&lt;/li&gt;
  &lt;li tabindex="-1" role="option"&gt;Brouillons&lt;/li&gt;
  &lt;li tabindex="-1" role="option"&gt;Corbeille&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>À noter que les balises <code>ul</code> et <code>li</code> pourraient être remplacées par de simples balises <code>div</code>.</p>

<h3>Interactions</h3>
<p>Pour coller avec le pattern <abbr>ARIA</abbr> de la <i lang="en">listbox</i> (<a href="https://www.w3.org/TR/wai-aria-practices-1.1/#Listbox">WAI-<abbr>ARIA</abbr> Authoring Practices</a>), on va gérer quelques interactions à l’aide de code Javascript.</p>
<p>Lors de la prise du focus, si aucun élément n’est sélectionné, on doit automatiquement sélectionner la première option.
Si un élément est déjà sélectionné lorsque la <i lang="en">listbox</i> reçoit le focus, on doit déplacer le focus sur celui-ci.</p>

<pre><code class="js">
 $("[role=listbox]").on("focus", function () {
     // If no selected element, select the first by default
     if (!$(this).find("[aria-selected=true]").length) {
          $(this).find("[role=option]:first").attr("aria-selected", "true").focus();
     } else {
         $(this).find("[aria-selected=true]").focus();
     }
  });
</code></pre>

<p>On va ensuite gérer l’interaction clavier&nbsp;:</p>
<ul>
    <li>Flèche haut pour sélectionner l’élément précédent</li>
    <li>Flèche bas pour sélectionner l’élément suivant</li>
</ul>

<pre><code class="javascript">
$("[role=listbox]").on("keydown", function (e) {
  var currentItem = $(this).find("[aria-selected=true]");
  switch (e.keyCode) {
      case 38:  // Up arrow
          if (currentItem.prev().length) {
              currentItem.attr("aria-selected", "false");
              currentItem.prev().attr("aria-selected", "true").focus();
          }
          e.preventDefault();
          break;
      case 40: // Down arrow
          if (currentItem.next().length) {
              currentItem.attr("aria-selected", "false");
              currentItem.next().attr("aria-selected", "true").focus();
          }
          e.preventDefault();
          break;
  }
});
</code></pre>

<p>Enfin, il nous reste à gérer la souris. Lorsqu’une option est sélectionnée, on modifie son attribut <code>aria-selected</code>.</p>
<pre><code class="javascript">
$("[role=option]").on("mousedown", function (e) {
  $(this).parent().find("[aria-selected=true]").attr("aria-selected", "false");
  $(this).attr("aria-selected", "true");
  e.preventDefault();
});
</code></pre>

<p>On ajoute un peu de cosmétique en modifiant le pointeur de la souris au survol des options.</p>

<pre><code class="css">
[role=option] {
  cursor: pointer;
}
</code></pre>

<h2>Exemple</h2>

<p>Voici un exemple de liste implémentée à partir du code ci-dessus.</p>

<h3 id="mail-folder">Liste des dossiers courrier</h3>

<div class="row">
  <ul role="listbox" tabindex="0" class="col-md-4" aria-labelledby="mail-folder">
      <li tabindex="-1" role="option">Boite de réception (24) <span class="sr-only">messages non lus</span></li>
      <li tabindex="-1" role="option">Eléments envoyés</li>
      <li tabindex="-1" role="option">Brouillons</li>
      <li tabindex="-1" role="option">Corbeille</li>
  </ul>
</div>

<h3>Place aux tests</h3>

<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Utilisation de la souris&nbsp;: </strong> on peut sélectionner un élément de la liste à l’aide de la souris.</p>
<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Utilisation au lecteur d’écran&nbsp;: </strong>avec <abbr>NVDA</abbr>, il est possible de parcourir les différents éléments de la liste, il est également possible de connaître l’élément en cours de sélection.</p>
<p><strong><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Utilisation au clavier&nbsp;: </strong> à l’aide de la touche <kbd>Tab</kbd>, il est possible d’accéder à la liste, ensuite les flèches haut et bas permettent de déplacer la sélection. Par contre, les touches <kbd>Maj+Tab</kbd> devraient permettre de faire remonter le focus dans la page, or celui-ci est bloqué à l’intérieur de la liste.</p>

<h2>Correction de la navigation au clavier</h2>
<p>Lorsque le focus est positionné sur un élément de la liste, la combinaison de touches <kbd>Maj+Tab</kbd> fait remonter le focus sur le premier élément focusable qui dans ce cas est l’élément <code>listbox</code>. Or, dès que la <i lang="en">listbox</i> reçoit le focus, on déplace automatiquement le focus sur l’élément sélectionné.</p>
<p>Pour corriger le problème, il suffit de rendre la <i lang="en">listbox</i> non focusable une fois que le focus est situé sur une des options.</p>

<pre><code class="javascript">
 $("[role=option]").on("focus", function (e) {
     $(this).parent().attr("tabindex", "-1");
 });

 $("[role=option]").on("blur", function (e) {
     $(this).parent().attr("tabindex", "0");
 });
</code></pre>

<h2>Exemple fonctionnel</h2>

<h3 id="mail-folder2">Liste des dossiers courrier</h3>

<div class="row">
  <ul id="listbox-ok" role="listbox" tabindex="0" class="col-md-4" aria-labelledby="mail-folder2">
      <li tabindex="-1" role="option">Boite de réception (24) <span class="sr-only">messages non lus</span></li>
      <li tabindex="-1" role="option">Eléments envoyés</li>
      <li tabindex="-1" role="option">Brouillons</li>
      <li tabindex="-1" role="option">Corbeille</li>
  </ul>
</div>

<h3>Place aux tests</h3>

<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Utilisation de la souris&nbsp;:</strong> OK</p>
<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Utilisation au lecteur d’écran&nbsp;:</strong> OK</p>
<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Utilisation au clavier&nbsp;:</strong> OK</p>

<h2>Exemple webmail</h2>
<p>Voici une maquette statique qui met en œuvre le composant <i lang="en">listbox</i> de cet exemple et celui de l’exemple sur les <a href="../listbox-avec-cases-a-cocher/"><i lang="en">listbox</i> avec cases à cocher</a>.</p>
<a class="btn btn-secondary" href="../webmail/">Ouvrir le webmail</a>

<h2>Liens</h2>
Plus d’infos sur <abbr>ARIA</abbr> et les <i lang="en">listbox</i>&nbsp;:
<ul>
  <li><a href="http://w3c.github.io/aria-practices/#Listbox" hreflang="en" lang="en"><abbr>WAI</abbr>-<abbr>ARIA</abbr> Authoring Practices 1.1</a></li>
  <li><a href="https://www.w3.org/TR/wai-aria-1.1/#roles" hreflang="en" lang="en">The roles model</a></li>
</ul>

    </main>
    <footer id="footer" class="o-footer" role="contentinfo">
  <div class="container-lg">
    <nav class="py-2" role="navigation">
      <ul class="nav flex-column flex-sm-row"><li class="nav-item">
            <a href="/fr/contact" class="nav-link"><u>Contact</u></a>
          </li><li class="nav-item">
            <a href="/fr/a-propos" class="nav-link"><u>À propos</u></a>
          </li><li class="nav-item ml-sm-auto">
          <a href="https://github.com/Orange-OpenSource/a11y-guidelines/issues/new?title=File%20path%20:%20'./src/fr/web/exemples-de-composants/listbox/index.njk'" class="nav-link" rel="noopener noreferrer" target="_blank" title="Signaler une erreur sur Github (nouvelle fenêtre)">
            <u>Signaler une erreur sur Github<span class="sr-only">&nbsp;(nouvelle fenêtre)</span><svg width="16" height="16" class="ml-1" viewBox="0 0 1000 1000" aria-hidden="true" focusable="false"><path class="cls-1" d="M374.908,308.958L600,309V109L921.719,430.9a74.988,74.988,0,0,1,0,106.044L600,859V659H325A150.027,150.027,0,0,0,175,809v81C98.941,830.528,50,737.929,50,633.891,50,454.436,195.466,308.958,374.908,308.958Z"/></svg></u>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</footer>

    <a href="#" id="back-to-top" class="o-scroll-up static" title="Retour en haut de page">
      <span class="d-none d-sm-inline-block">Retour en haut de page</span>
    </a>
    <script src="/assets/vendors/tarteaucitronjs/tarteaucitron.js"></script>
    
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    
    
      <script src="https://cdn.jsdelivr.net/npm/boosted@4.6.0/dist/js/boosted.min.js" integrity="sha384-iNhsKqieEna23DDrKXyI9Ze4CeR2yIykw8gQ/AHcSSZTASt2jt+YQdOqqcos7vJI" crossorigin="anonymous"></script>
    
    
    
      <script src="/assets/vendors/highlightjs/highlight.js"></script>
    
    <script>
      const Application = {
        lang: "fr",
        vendors: {
          highlightJS: true
        }
      }
    </script>
    <script src="/assets/script.js"></script><script src="script.js"></script><script>
      var tarteaucitronForceLanguage = "fr"
      tarteaucitron.init({"privacyUrl":"","hashtag":"#cookie-consent","cookieName":"cookie-consent","orientation":"bottom","showAlertSmall":false,"cookieslist":true,"adblocker":false,"AcceptAllCta":true,"highPrivacy":true,"handleBrowserDNTRequest":false,"removeCredit":false,"moreInfoLink":true,"useExternalCss":true,"readmoreLink":"/cookiespolicy","mandatory":false});var dataLayer = [{
          'site_name': 'accessibility-guidelines',
          'phase': 'prod'
        }];
        tarteaucitron.user.googletagmanagerId = "GTM-N3M5VXS";
        (tarteaucitron.job = tarteaucitron.job || []).push('googletagmanager')</script>
    <div id="a11y_heading_anchor_label" hidden>Lien pour ancrage</div>
    <!--  This file is part of a11y-guidelines | Our vision of mobile & web accessibility guidelines and best practices, with valid/invalid examples. Copyright (C) 2016 - 2021 Orange SA. See the Creative Commons Legal Code Attribution-ShareAlike 3.0 Unported License for more details (LICENSE file). -->

  </body>
</html>
