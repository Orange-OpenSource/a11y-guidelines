<!doctype html>
<html lang="en" dir="ltr" class="no-js" data-bs-theme="light">
  <head>
    <meta charset="utf-8">
    <title>Listbox and keyboard navigation - Orange digital accessibility guidelines</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="l2y2kYf6v887K8NW7L41pN29ueW0w5P02MJrUiP2JoA" />
    
    <meta name="description" content="Example of ARIA list (part 3)">
    
    <link rel="preconnect" href="https://code.jquery.com" crossorigin="anonymous">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/HelvNeue55_W1G.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/HelvNeue75_W1G.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="alternate" type="application/rss+xml" title="Recommandations accessibilité Orange - Français" href="/feed-fr.xml" />
    <link rel="alternate" type="application/rss+xml" title="Orange digital accessibility guidelines - English" href="/feed-en.xml" />
    
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="/assets/images/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/assets/images/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="mask-icon" href="/assets/images/safari-pinned-tab.svg" color="#563d7c">
    <link rel="icon" href="/assets/images/favicon.ico">
    
    <link href="https://cdn.jsdelivr.net/npm/boosted@5.3.3/dist/css/boosted.min.css" rel="stylesheet" integrity="sha384-laZ3JUZ5Ln2YqhfBvadDpNyBo7w5qmWaRnnXuRwNhJeTEFuSdGbzl4ZGHAEnTozR" crossorigin="anonymous">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.1/build/styles/a11y-light.min.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/tarteaucitron-boosted.css"><link rel="stylesheet" href="style.css"></head>
  <body data-bs-spy="scroll" data-bs-offset="130" data-bs-target="#toc" style="position:relative;">
    

<header role="banner">
  <nav class="navbar navbar-expand-lg supra" aria-label="Skip links - Switch language" data-bs-theme="dark">
   <div class="container-lg">
      <ul id="avoidanceLinks" class="navbar-nav me-auto"><li class="nav-item">
      <a href="#main-menu" class="nav-link">Go to menu</a>
    </li><li class="nav-item">
      <a href="#main-content" class="nav-link">Go to content</a>
    </li><li class="nav-item hidden-if-no-js">
      <a href="#search-input" class="nav-link">Go to search</a>
    </li><li class="nav-item">
      <a href="#footer" class="nav-link">Go to footer</a>
    </li></ul>

      <ul class="navbar-nav">
      <li class="nav-item">
        <a href="/en/" class="nav-link active" aria-current="true" lang="en">
        English
        </a>
      </li>
      <li class="nav-item">
        <a href="/fr/" class="nav-link" lang="fr">
        Français
        </a>
      </li></ul>
    </div>
  </nav>

  

<div class="navbar navbar-expand-md" data-bs-theme="dark">
  <nav id="main-menu" class="container-lg justify-content-md-start align-items-center" role="navigation" aria-label="Main navigation">
    <a href="/en/" class="navbar-brand flex-grow-1 flex-md-grow-0" title="Orange, go to homepage">
      <img src="/assets/images/orange-logo.svg" alt="Orange, go to homepage" width="50" height="50">
    </a>

    <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#main-menu-list" aria-controls="main-menu-list" aria-expanded="false" aria-label="Navigation menu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse me-auto" id="main-menu-list">
      <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a href="/en/" class="nav-link">
  Home
</a>
            </li>
            <li class="nav-item">
              <a href="/en/planning/" class="nav-link">
  Planning
</a>
            </li>
            <li class="nav-item">
              <a href="/en/web/" class="nav-link">
  Web
</a>
            </li>
            <li class="nav-item">
              <a href="/en/mobile/android/" class="nav-link">
  Android
</a>
            </li>
            <li class="nav-item">
              <a href="/en/mobile/ios/" class="nav-link">
  iOS
</a>
            </li>
            <li class="nav-item">
              <a href="/en/content-and-communication/" class="nav-link">
  Content and communication
</a>
            </li>
            <li class="nav-item">
              <a href="/en/articles/" class="nav-link active" aria-current="true">
  Articles
</a>
            </li><li class="nav-item d-md-none">
  <span class="visually-hidden">Switch language</span>
  <ul class="d-flex list-inline">
      <li class="list-inline-item flex-grow-1">
        <a href="/en/" class="nav-link active" aria-current="true" lang="en">
        English
        </a>
      </li>
      <li class="list-inline-item flex-grow-1">
        <a href="/fr/" class="nav-link" lang="fr">
        Français
        </a>
      </li></ul>
</li>
      </ul>
    </div>

    <div id="search-input"></div>

  </nav>
</div>

  
</header>
    <div class="container-lg pt-2">
      
      
        

<nav role="navigation" aria-labelledby="breadcrumb-label">
  <p id="breadcrumb-label" class="visually-hidden">You are here:</p>
  <ol class="breadcrumb">
      
        <li class="breadcrumb-item d-none d-sm-flex">
          <a class="breadcrumb-focus" href="/en/">Home</a>
        </li>
      
      
        <li class="breadcrumb-item">
          <a class="breadcrumb-focus" href="/en/articles/">Articles</a>
        </li>
      
      
        <li class="breadcrumb-item d-none d-sm-flex" aria-current="page">
          Listbox and keyboard navigation
        </li>
      </ol>
</nav>

      
      <div class="MobileDropdownNavigationContainer d-flex flex-column flex-sm-row justify-content-between">
        
        
          <nav id="mobile-toc" class="dropdown d-md-none" role="navigation" aria-labelledby="mobile-toc-dropdown-handler">
      <button type="button" class="btn btn-outline-secondary dropdown-toggle" id="mobile-toc-dropdown-handler" data-bs-toggle="dropdown" aria-expanded="false">
        On this page
      </button>
      <div class="dropdown-menu dropdown-menu-right"><a href="#" class="dropdown-item text-wrap">Introduction</a><a href="#" class="dropdown-item text-wrap">ARIA patterns</a><a href="#" class="dropdown-item text-wrap">Example</a><a href="#" class="dropdown-item text-wrap">Implementation</a></div>
    </nav>
        
      </div>
    </div>
    
  <div class="container-lg pt-4">
      <div class="row">
        
        <main id="main-content" class="col-md-9" role="main">
          
            <h1>Listbox and keyboard navigation</h1>
            
              <span class="visually-hidden" id="filters_label">
                Associated themes:
              </span>
              <ul class="list-inline mb-1" aria-labelledby="filters_label"><li class="list-inline-item"><div class="tagType" data-tag="component">Component</a></li>
              </ul>
            
            
            

            <p class="text-muted mb-0">
              <span class="visually-hidden">Publication date</span>
              <time datetime="2025-05-05T00:00:00.000Z">
                May 05, 2025
              </time>
            </p>

            
              <p class="text-muted mb-0">
                Update of the article from
                <time datetime="2018-01-09T00:00:00.000Z">
                  January 09, 2018
                </time>
              </p>
            
          
          <div class="mt-4">
          
<h1>Listbox and keyboard navigation</h1>

<h2>Introduction</h2>
<p>For this article, we start from <a href="../listbox-with-checkboxes/">the example of the listbox with checkboxes</a>. The objective is to improve keyboard navigation in order to get close to the W3C / WAI guidelines.</p>

<h2><abbr title="Accessible Rich Internet Applications">ARIA</abbr> patterns</h2>
<p>The W3C maintains online specifications that describe how <abbr>ARIA</abbr> components should behave: <a href="https://www.w3.org/WAI/ARIA/apg/patterns/"><abbr>WAI-ARIA</abbr> Authoring Practices 1.1</a>.</p>
<p>The <a href="https://www.w3.org/WAI/ARIA/apg/patterns/listbox/keyboardinteraction">specifications for the listbox</a> tell us for example that:</p>
<ul>
    <li>The list must be focusable (<code>tabindex="0"</code>).</li>
    <li>The <kbd>up</kbd> / <kbd>down</kbd> arrows must be used to choose the selected item.</li>
    <li>We must be able to select an item by quickly typing the first few characters (e.g. when pressing the “<kbd>p</kbd>” and “<kbd>h</kbd>” keys, the selection must move to “<strong>Ph</strong>otos”).</li>
    <li><kbd>Shift + F10</kbd> must allow to open the focused item context menu if the item has one.</li>
    <li>In case of a multiple-selection list, the <kbd>Ctrl + a</kbd> shortcut should select all items.</li>
    <li>The <kbd>Home</kbd> and <kbd>End</kbd> keys must be able to respectively select the first and the last item of the list.</li>
</ul>

<h2>Example</h2>
<div class="row">
  <ul role="listbox" tabindex="0" class="col-md-8">
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check1" class="form-check-input" type="checkbox"><label for="check1">
              <span>Important information about your account</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check2" class="form-check-input" type="checkbox"><label for="check2">
              <span>Sending message test</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check3" class="form-check-input" type="checkbox"><label for="check3">
              <span>Photos of the weekend at the sea</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check4" class="form-check-input" type="checkbox"><label for="check4">
              <span>Re: Your order N°3642</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check5" class="form-check-input" type="checkbox"><label for="check5">
              <span>Re: At noon, it will be the last!</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check6" class="form-check-input" type="checkbox"><label for="check6">
              <span><i lang="fr">Jazz à Vienne</i> #36 has started!</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check7" class="form-check-input" type="checkbox"><label for="check7">
              <span>Wine order</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check8" class="form-check-input" type="checkbox"><label for="check8">
              <span>CDS 2016</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
          <input tabindex="-1" id="check9" class="form-check-input" type="checkbox"><label for="check9">
          <span>Work council offers</span></label>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check10" class="form-check-input" type="checkbox"><label for="check10">
              <span>Re: Reading</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check11" class="form-check-input" type="checkbox"><label for="check11">
              <span>You have more friends than you can ever imagine</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check12" class="form-check-input" type="checkbox"><label for="check12">
              <span>10 for today</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check13" class="form-check-input" type="checkbox"><label for="check13">
              <span>Notification: appointment tonight</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check14" class="form-check-input" type="checkbox"><label for="check14">
              <span>More than 20,000 discounted items!</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check15" class="form-check-input" type="checkbox"><label for="check15">
              <span>7 stories you shouldn't miss</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check16" class="form-check-input" type="checkbox"><label for="check16">
              <span>Warning, only 2 days left</span></label>
            </div>
      </li>
      <li tabindex="-1" role="option" aria-checked="false">
            <div class="form-check mb-0">
              <input tabindex="-1" id="check17" class="form-check-input" type="checkbox"><label for="check17">
              <span>Your order n°04565</span></label>
            </div>
      </li>
  </ul>
</div>

<h2>Implementation</h2>
<p>The functionality to automatically select the item by typing the first letters is not easy to implement. The following example uses <abbr title="XML Path Language">XPath</abbr>.</p>
<p>The first thing to do is listen to the keyboard once the focus is on the list. Depending on the key, it performs an action (selecting an item, moving the selected item…).</p>

<pre><code class="javascript">
…
// Init
const listbox = document.querySelector("[role=listbox]");

// On keydown
listbox.onkeydown = function(e) {          
	var currentItem = this.querySelector("[aria-selected=true]"); 
  switch (e.keyCode) {
      case 9: // TAB
          break;
      case 36: // home
          …
          e.preventDefault();
          break;
      case 35: // end
          …
          e.preventDefault();
          break;
      case 38:  // Up arrow
          …
          e.preventDefault();
          break;
      …
</code></pre>

<p>Other keys that are not used to perform an action on the list, i.e. letters and digits, are saved to create the search string. When the user does not type anything for a few milliseconds (500 in our example), we look for a list item that begins with the typed string and select it.</p>

<pre><code class="javascript">
…
case 65: // Ctrl + A
  if (e.ctrlKey) {
      …
  }
default:  // Search item starts with
  // Cancel current timer
  clearTimeout(timer);

  // Create search string
  searchString += e.key;
  var self = this;

  // Set a timer to search item after 500ms
  timer = setTimeout(function(){
      // Search item
      var xpath = "li/span[starts-with(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), '" + searchString + "')]";
      var matchingElement = document.evaluate(xpath, self, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;

      // Reset search string
      searchString = "";

      // If an item is found…
      if (matchingElement) {                            
	   currentItem.setAttribute("aria-selected", "false");
	   matchingElement.parentElement.setAttribute("aria-selected", "true");
	   matchingElement.parentElement.focus();
	   matchingElement.parentElement.classList.add("active");
      }     
  }, 500);

  e.preventDefault();
</code></pre>

<p>To search the item in the list, we use the following <abbr>XPath</abbr> query <code>/li/span[starts-with(text(), "the string to search")]</code>. In addition, in order to fix the character case issue, we use the <code>translate</code> function.</p>

          </div>
        </main>
        
          <div class="col-md-3">
            <div class="StickySideNavigation">
              <nav id="toc" class="bg-200 p-3 d-none d-md-block" role="navigation" aria-labelledby="toc-title">
      <h2 id="toc-title">On this page</h2>
      <ul class="nav flex-column"><li class="nav-item position-relative">
            <a href="#" class="nav-link text-muted">Introduction</a></li><li class="nav-item position-relative">
            <a href="#" class="nav-link text-muted">ARIA patterns</a></li><li class="nav-item position-relative">
            <a href="#" class="nav-link text-muted">Example</a></li><li class="nav-item position-relative">
            <a href="#" class="nav-link text-muted">Implementation</a></li>
      </ul>
    </nav>
            </div>
          </div>
        
      </div>
    </div>
    

<footer id="footer" class="o-footer" role="contentinfo">
  <div class="container-lg">
    <nav class="py-2" role="navigation">
      <ul class="nav align-items-center flex-column flex-sm-row"><li class="nav-item">
            <a href="/en/contact/" class="nav-link">
  Contact
</a>
          </li><li class="nav-item">
            <a href="/en/about/" class="nav-link">
  About
</a>
          </li><li class="nav-item">
            <a href="/feed-en.xml" class="nav-link">
  RSS feed
</a>
          </li><li class="nav-item">
            <a href="/en/accessibility/" class="nav-link">
  Accessibility: partially compliant
</a>
          </li><li class="nav-item">
            <a href="https://a11y-guidelines-orange.netlify.app/en/" class="nav-link">
  Pre-release on Netlify
</a>
          </li><li class="nav-item">
          <a href="https://www.netlify.com" class="nav-link" title="Deploys by Netlify">
            <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" width="89" height="40">
          </a>
        </li>
        <li class="nav-item ms-sm-auto">
          <a href="https://github.com/Orange-OpenSource/a11y-guidelines/issues/new?title=File%20path%20:%20'./src/en/articles/listbox-and-keyboard-navigation/index.njk'" class="nav-link" rel="noopener noreferrer" target="_blank" title="Report an error on GitHub (new window)">
            Report an error on GitHub<span class="visually-hidden">&nbsp;(new window)</span><svg width="16" height="16" class="ms-1" viewBox="0 0 1000 1000" aria-hidden="true" focusable="false"><path class="cls-1" d="M374.908,308.958L600,309V109L921.719,430.9a74.988,74.988,0,0,1,0,106.044L600,859V659H325A150.027,150.027,0,0,0,175,809v81C98.941,830.528,50,737.929,50,633.891,50,454.436,195.466,308.958,374.908,308.958Z"/></svg>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</footer>

    <nav role="navigation" class="back-to-top" aria-label="Back to top">
      <a href="#top" class="back-to-top-link btn btn-icon btn-outline-secondary" title="Back to top">
        <span class="visually-hidden">Back to top</span>
      </a>
    </nav>
    <script src="/assets/vendors/tarteaucitronjs/tarteaucitron.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    
    
      <script src="https://cdn.jsdelivr.net/npm/boosted@5.3.3/dist/js/boosted.bundle.min.js" integrity="sha384-3RoJImQ+Yz4jAyP6xW29kJhqJOE3rdjuu9wkNycjCuDnGAtC/crm79mLcwj1w2o/" crossorigin="anonymous"></script>
    
    
      <script src="/assets/vendors/highlightjs/highlight.js"></script>
    
    <script>
      const Application = {
        lang: "en",
        vendors: {
          highlightJS: true,
          highlightTitle: true
        }
      }
    </script>
    <script src="/assets/script.js"></script><script src="script.js"></script><script>
      var tarteaucitronForceLanguage = "en"
      tarteaucitron.init({"privacyUrl":"","hashtag":"#cookie-consent","cookieName":"cookie-consent","orientation":"bottom","showAlertSmall":false,"cookieslist":true,"adblocker":false,"showIcon":false,"AcceptAllCta":true,"highPrivacy":true,"handleBrowserDNTRequest":false,"removeCredit":false,"moreInfoLink":true,"useExternalCss":true,"readmoreLink":"/cookiespolicy","mandatory":false,"googleConsentMode":true});var dataLayer = [{
          'site_name': 'accessibility-guidelines',
          'phase': 'prod'
        }];
        tarteaucitron.user.googletagmanagerId = "GTM-N3M5VXS";
        (tarteaucitron.job = tarteaucitron.job || []).push('gcmanalyticsstorage');docsearch({"appId":"QML88ZHQMQ","apiKey":"92e5543d97d72ef6a3ba61b241a75b19","indexName":"a11y-guidelines-orange","container":"#search-input","searchParameters":{"facetFilters":["language:en"]},"placeholder":"Search in entire website","translations":{"button":{"buttonText":"Search in entire website","buttonAriaLabel":"Search in entire website"},"modal":{"searchBox":{"resetButtonTitle":"Clear the query","resetButtonAriaLabel":"Clear the query","cancelButtonText":"Cancel","cancelButtonAriaLabel":"Cancel"},"startScreen":{"recentSearchesTitle":"Recent","noRecentSearchesText":"No recent searches","saveRecentSearchButtonTitle":"Save this search","removeRecentSearchButtonTitle":"Remove this search from history","favoriteSearchesTitle":"Favorite","removeFavoriteSearchButtonTitle":"Remove this search from favorites"},"errorScreen":{"titleText":"Unable to fetch results","helpText":"You might want to check your network connection."},"footer":{"selectText":"to select","selectKeyAriaLabel":"Enter key","navigateText":"to navigate","navigateUpKeyAriaLabel":"Arrow up","navigateDownKeyAriaLabel":"Arrow down","closeText":"to close","closeKeyAriaLabel":"Escape key","searchByText":"Search by"},"noResultsScreen":{"noResultsText":"No results for","suggestedQueryText":"Try searching for","reportMissingResultsText":"Believe this query should return results?","reportMissingResultsLinkText":"Let us know."}}},"debug":false});
    </script>
    <div hidden>Anchor link</div>
    <!--  This file is part of a11y-guidelines | Our vision of mobile & web accessibility guidelines and best practices, with valid/invalid examples. Copyright (C) 2016 - 2025 Orange SA. See the Creative Commons Legal Code Attribution-ShareAlike 3.0 Unported License for more details (LICENCE file). -->

  </body>
</html>
