<!doctype html>
<html lang="en" dir="ltr" class="no-js">
  <head>
    <meta charset="utf-8">
    <title>Listbox - Orange digital accessibility guidelines</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://code.jquery.com" crossorigin="anonymous">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/HelvNeue55_W1G.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/HelvNeue75_W1G.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="/assets/images/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/assets/images/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="mask-icon" href="/assets/images/safari-pinned-tab.svg" color="#563d7c">
    <link rel="icon" href="/assets/images/favicon.ico">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boosted@4.6.0/dist/css/boosted.min.css" integrity="sha384-gqlCljYk+czxYG/OEUHPObOqdFdx4RFpXrAy+z6dbWdeD1ybOujFGA+lKVLnXtxx" crossorigin="anonymous">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.1/build/styles/a11y-light.min.css">
    
    <link rel="stylesheet" href="/assets/vendors/docsearch/docsearch.min.css" />
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/tarteaucitron-boosted.css"><link rel="stylesheet" href="style.css"></head>
  <body>
    

<header role="banner">
  <div class="navbar navbar-dark navbar-expand supra">
    <div class="container-lg">
      <nav role="navigation" aria-label="Skip links">
  <ul class="navbar-nav"><li class="nav-item">
        <a href="#main-menu" class="nav-link">Go to menu</a>
      </li><li class="nav-item">
        <a href="#main-content" class="nav-link">Go to content</a>
      </li><li class="nav-item hidden-if-no-js">
        <a href="#search-input" class="nav-link">Go to search</a>
      </li><li class="nav-item">
        <a href="#footer" class="nav-link">Go to footer</a>
      </li></ul>
</nav>

      <nav role="navigation" aria-label="Switch language">
  <ul class="navbar-nav">
      <li class="nav-item">
        <a href="/en/" class="nav-link active" aria-current="true" lang="en">
        English
        </a>
      </li>
      <li class="nav-item">
        <a href="/fr/" class="nav-link" lang="fr">
        Français
        </a>
      </li></ul>
</nav>
    </div>
  </div>
  

<div class="navbar navbar-dark navbar-expand-md">
  <nav id="main-menu" class="container-lg justify-content-md-start" role="navigation" aria-label="Main navigation">
    <a href="/en" class="navbar-brand flex-grow-1 flex-md-grow-0" title="Orange, go to homepage">
      <img src="/assets/images/orange-logo.svg" alt="Orange, go to homepage" width="50" height="50">
    </a>

    <ul id="main-menu-list" class="navbar-nav navbar-collapse collapse"><li class="nav-item">
          <a href="/en/" class="nav-link">
  Home
</a>
        </li><li class="nav-item">
          <a href="/en/planning/" class="nav-link">
  Planning
</a>
        </li><li class="nav-item">
          <a href="/en/web/" class="nav-link active" aria-current="true">
  Web
</a>
        </li><li class="nav-item">
          <a href="/en/mobile/android/" class="nav-link">
  Android
</a>
        </li><li class="nav-item">
          <a href="/en/mobile/ios/" class="nav-link">
  iOS
</a>
        </li><li class="nav-item">
          <a href="/en/editorial-content/" class="nav-link">
  Editorial content
</a>
        </li><li class="nav-item">
          <a href="/en/articles/" class="nav-link">
  Articles
</a>
        </li><li class="nav-item d-md-none">
  <span class="sr-only">Switch language</span>
  <ul class="d-flex list-inline">
      <li class="list-inline-item flex-grow-1">
        <a href="/en/" class="nav-link active" aria-current="true" lang="en">
        English
        </a>
      </li>
      <li class="list-inline-item flex-grow-1">
        <a href="/fr/" class="nav-link" lang="fr">
        Français
        </a>
      </li></ul>
</li>
    </ul>

    <button id="search-input-toggler" type="button" class="btn btn-icon collapsed hidden-if-no-js" data-toggle="collapse" data-target="#search-input-container" aria-expanded="false" aria-controls="search-input-container" title="Search">
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 1000 1000" focusable="false" aria-hidden="true" fill="#ff7900">
        <path d="M892.285,819.383L666.631,593.728a310.794,310.794,0,0,0,58.05-181.388c0-172.5-139.839-312.34-312.341-312.34S100,239.838,100,412.34,239.838,724.681,412.34,724.681a310.918,310.918,0,0,0,181.4-58.05L819.383,892.275a25.053,25.053,0,0,0,35.342,0l37.56-37.55A25.071,25.071,0,0,0,892.285,819.383ZM412.34,624.732c-117.3,0-212.391-95.092-212.391-212.392S295.04,199.949,412.34,199.949,624.732,295.04,624.732,412.34,529.64,624.732,412.34,624.732Z"/>
      </svg>

      <span class="sr-only">Search</span>
    </button>

    <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#main-menu-list" aria-controls="main-menu-list" aria-expanded="false" aria-label="Navigation menu">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>
</div>

<div id="search-input-container" class="bg-dark collapse">
  <form class="container-lg py-3" role="search">
    <input id="search-input" type="search" class="form-control form-control-lg bg-dark border-500" aria-label="Search" placeholder="Search">
  </form>
</div>

  <nav id="secondary-navigation" class="o-nav-local navbar-light mb-1" role="navigation" aria-label="Secondary navigation">
  <div class="container-lg">
    <ul class="nav"><li class="nav-item">
              <a href="/en/web/design/" class="nav-link">
  Design
</a>
            </li><li class="nav-item">
              <a href="/en/web/develop/" class="nav-link">
  Develop
</a>
            </li><li class="nav-item">
              <a href="/en/web/test/" class="nav-link">
  Test
</a>
            </li><li class="nav-item">
              <a href="/en/web/wcag-audit/" class="nav-link">
  Evaluate
</a>
            </li><li class="nav-item">
              <a href="/en/web/toolbox/" class="nav-link">
  Toolbox
</a>
            </li><li class="nav-item">
              <a href="/en/web/components-examples/" class="nav-link active" aria-current="true">
  Component examples
</a>
            </li></ul>
  </div>
</nav>
</header>

    <div class="container-lg pt-2">
      
      
        

<nav role="navigation" aria-labelledby="breadcrumb-label">
  <p id="breadcrumb-label" class="sr-only">You are here:</p>
  <ol class="breadcrumb">
      
        <li class="breadcrumb-item d-none d-sm-flex">
          <a href="/en/">Home</a>
        </li>
      
      
        <li class="breadcrumb-item d-none d-sm-flex">
          <a href="/en/web/">Web</a>
        </li>
      
      
        <li class="breadcrumb-item">
          <a href="/en/web/components-examples/">Component examples</a>
        </li>
      
      
        <li class="breadcrumb-item d-none d-sm-flex" aria-current="location">
          Listbox
        </li>
      </ol>
</nav>

      
      <div class="MobileDropdownNavigationContainer d-flex flex-column flex-sm-row justify-content-between">
        
        
      </div>
    </div>
    
  <main id="main-content" class="container-lg pt-4" role="main">
      
<h1><abbr title="Accessible Rich Internet Applications">ARIA</abbr> lists (listbox)</h1>

<h2>Introduction</h2>
<p><abbr>ARIA</abbr> provides a large number of components that can be used in rich interfaces (tab, accordion, slider, listbox...). In this example, we will look into the listbox component.</p>
<p>A listbox is a component that allows the user to select one or more items from a list.</p>
<p>The items of a listbox are static, a listbox is not intended to receive interactive items (such as links, buttons…), however it can contain images unlike the <code>select</code>.</p>
<p>More info: <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#Listbox"><abbr>WAI-ARIA</abbr> Authoring Practices</a>.</p>

<h2>Caution</h2>
<p>Although improvements are being made with each new version, support for <abbr>ARIA</abbr> is still partial for all screen readers. Its use should be conditioned by compatibility tests on the target environments (browser/screen reader combinations).</p>

<h2>Implementation</h2>

<h3><abbr title="Hypertext Markup Language">HTML</abbr> code</h3>
<p>To create a listbox, just apply the role <code>listbox</code> to a parent container. Then apply the <code>option</code> role to the list items. We must make it focusable for users who navigate using the keyboard (adding the <code>tabindex="0"</code> attribute) or adding the <code>aria-label</code> or <code>aria-labelledby</code> label for people using a screen reader. Finally, we will also add the <code>tabindex="-1"</code> attribute to the options so that they can receive the focus using javascript.</p>

<pre><code class="html">
&lt;ul role="listbox" tabindex="0" aria-label="folder list"&gt;
  &lt;li tabindex="-1" role="option"&gt;Inbox (4) &lt;span class="sr-only"&gt;unread messages&lt;/span&gt;&lt;/li&gt;
  &lt;li tabindex="-1" role="option"&gt;Sent&lt;/li&gt;
  &lt;li tabindex="-1" role="option"&gt;Draft&lt;/li&gt;
  &lt;li tabindex="-1" role="option"&gt;Trash&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>Note that the <code>ul</code> and <code>li</code> tags could be replaced by simple <code>div</code> tags.</p>

<h3>Interactions</h3>
<p>To stick with the pattern of the <abbr>ARIA</abbr> listbox (<a href="https://www.w3.org/TR/wai-aria-practices-1.1/#Listbox"><abbr>WAI-ARIA</abbr> Authoring Practices</a>), we must handle some interactions using JavaScript.</p>
<p>When taking the focus, if no item is selected, it should automatically select the first item.
If an item is already selected when the listbox receives the focus, it must move the focus to it.</p>

<pre><code class="javascript">
 $("[role=listbox]").on("focus", function () {
     // If no selected element, select the first by default
     if (!$(this).find("[aria-selected=true]").length) {
          $(this).find("[role=option]:first").attr("aria-selected", "true").focus();
     } else {
         $(this).find("[aria-selected=true]").focus();
     }
  });
</code></pre>

<p>We will then handle the keyboard interaction:</p>
<ul>
    <li><kbd>Up</kbd> arrow to select the previous item</li>
    <li><kbd>Down</kbd> arrow to select the next item</li>
</ul>

<pre><code class="javascript">
$("[role=listbox]").on("keydown", function (e) {
  var currentItem = $(this).find("[aria-selected=true]");
  switch (e.keyCode) {
      case 38:  // Up arrow
          if (currentItem.prev().length) {
              currentItem.attr("aria-selected", "false");
              currentItem.prev().attr("aria-selected", "true").focus();
          }
          e.preventDefault();
          break;
      case 40: // Down arrow
          if (currentItem.next().length) {
              currentItem.attr("aria-selected", "false");
              currentItem.next().attr("aria-selected", "true").focus();
          }
          e.preventDefault();
          break;
  }
});
</code></pre>

<p>Finally, we have to handle the mouse. When clicked, it sets the attribute <code>aria-selected</code>.</p>
<pre><code class="javascript">
$("[role=option]").on("mousedown", function (e) {
  $(this).parent().find("[aria-selected=true]").attr("aria-selected", "false");
  $(this).attr("aria-selected", "true");
  e.preventDefault();
});
</code></pre>

<p>We customize the mouse pointer when the mouse is over an item.</p>

<pre><code class="css">
[role=option] {
  cursor: pointer;
}
</code></pre>

<h2>Example</h2>

<p>Here is an example implementing the code above.</p>

<h3 id="mail-folder">List of mail folders</h3>

<div class="row">
  <ul role="listbox" tabindex="0" class="col-md-4" aria-labelledby="mail-folder">
      <li tabindex="-1" role="option">Inbox (24) <span class="sr-only">unread messages</span></li>
      <li tabindex="-1" role="option">Sent</li>
      <li tabindex="-1" role="option">Draft</li>
      <li tabindex="-1" role="option">Trash</li>
  </ul>
</div>

<h3>Testing</h3>

<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Mouse support: </strong> you can select an item from the list using the mouse.</p>
<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Screen reader support: </strong>with <abbr>NVDA</abbr>, it is possible to scroll through the items in the list, it is also possible to know the item being selected.</p>
<p><strong><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> <kbd>Tab</kbd> key support:</strong> you can access the list, then the <kbd>up</kbd> and <kbd>down</kbd> arrow keys move the selection. However, the <kbd>Shift+Tab</kbd> keys should move the focus toward the top of the page, instead, it is blocked inside the list.</p>

<h2>Fixing keyboard navigation</h2>
<p>When the focus is positioned on a list item, the <kbd>Shift+Tab</kbd> key combination brings up the focus to the first focusable element, in this case it is the <code>listbox</code> element. But as soon as the <code>listbox</code> receives the focus, it automatically moves the focus on the selected item.</p>
<p>To correct the problem, simply make listbox unfocusable once one of the list item has got the focus.</p>

<pre><code class="javascript">
 $("[role=option]").on("focus", function (e) {
     $(this).parent().attr("tabindex", "-1");
 });

 $("[role=option]").on("blur", function (e) {
     $(this).parent().attr("tabindex", "0");
 });
</code></pre>

<h2>working example</h2>

<h3 id="mail-folder2">List of email folders</h3>

<div class="row">
  <ul id="listbox-ok" role="listbox" tabindex="0" class="col-md-4" aria-labelledby="mail-folder2">
      <li tabindex="-1" role="option">Inbox (24) <span class="sr-only">unread messages</span></li>
      <li tabindex="-1" role="option">Sent</li>
      <li tabindex="-1" role="option">Drafts</li>
      <li tabindex="-1" role="option">Trash</li>
  </ul>
</div>

<h3>Testing</h3>

<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Mouse support: </strong> OK</p>
<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Screen reader support: </strong> OK</p>
<p><strong><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Keyboard support:</strong> OK</p>

<h2>Webmail example</h2>
<p>Here is a static prototype that implements the listbox component of this example and the example with a <a href="../listbox-with-checkboxes/">listbox with checkboxes</a>.</p>
<a class="btn btn-secondary" href="../webmail/">Open the webmail</a>

<h2>Links</h2>
More information on <abbr>ARIA</abbr> and listbox:
<ul>
  <li><a href="http://w3c.github.io/aria-practices/#Listbox"><abbr>WAI-ARIA</abbr> Authoring Practices 1.1</a></li>
  <li><a href="https://www.w3.org/TR/wai-aria-1.1/#roles">The listbox role model</a></li>
</ul>

    </main>
    

<footer id="footer" class="o-footer" role="contentinfo">
  <div class="container-lg">
    <nav class="py-2" role="navigation">
      <ul class="nav flex-column flex-sm-row"><li class="nav-item">
            <a href="/en/contact" class="nav-link">
  Contact
</a>
          </li><li class="nav-item">
            <a href="/en/about" class="nav-link">
  About
</a>
          </li><li class="nav-item">
            <a href="/en/accessibility" class="nav-link">
  Accessibility
</a>
          </li><li class="nav-item ml-sm-auto">
          <a href="https://github.com/Orange-OpenSource/a11y-guidelines/issues/new?title=File%20path%20:%20'./src/en/web/components-examples/listbox/index.njk'" class="nav-link" rel="noopener noreferrer" target="_blank" title="Report an error on GitHub (new window)">
            Report an error on GitHub<span class="sr-only">&nbsp;(new window)</span><svg width="16" height="16" class="ml-1" viewBox="0 0 1000 1000" aria-hidden="true" focusable="false"><path class="cls-1" d="M374.908,308.958L600,309V109L921.719,430.9a74.988,74.988,0,0,1,0,106.044L600,859V659H325A150.027,150.027,0,0,0,175,809v81C98.941,830.528,50,737.929,50,633.891,50,454.436,195.466,308.958,374.908,308.958Z"/></svg>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</footer>

    <nav role="navigation" aria-label="Back to top">
      <a href="#" id="back-to-top" class="o-scroll-up static" title="Back to top">
        <span class="d-none d-sm-inline-block">Back to top</span>
      </a>
    </nav>
    <script src="/assets/vendors/tarteaucitronjs/tarteaucitron.js"></script>
    <script src="/assets/vendors/docsearch/docsearch.min.js"></script>
    
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    
    
      <script src="https://cdn.jsdelivr.net/npm/boosted@4.6.0/dist/js/boosted.min.js" integrity="sha384-iNhsKqieEna23DDrKXyI9Ze4CeR2yIykw8gQ/AHcSSZTASt2jt+YQdOqqcos7vJI" crossorigin="anonymous"></script>
    
    
    
      <script src="/assets/vendors/highlightjs/highlight.js"></script>
    
    <script>
      const Application = {
        lang: "en",
        vendors: {
          highlightJS: true
        }
      }
    </script>
    <script src="/assets/script.js"></script><script src="script.js"></script><script>
      var tarteaucitronForceLanguage = "en"
      tarteaucitron.init({"privacyUrl":"","hashtag":"#cookie-consent","cookieName":"cookie-consent","orientation":"bottom","showAlertSmall":false,"cookieslist":true,"adblocker":false,"showIcon":false,"AcceptAllCta":true,"highPrivacy":true,"handleBrowserDNTRequest":false,"removeCredit":false,"moreInfoLink":true,"useExternalCss":true,"readmoreLink":"/cookiespolicy","mandatory":false});var dataLayer = [{
          'site_name': 'accessibility-guidelines',
          'phase': 'prod'
        }];
        tarteaucitron.user.googletagmanagerId = "GTM-N3M5VXS";
        (tarteaucitron.job = tarteaucitron.job || []).push('googletagmanager');docsearch({"apiKey":"a872e031c7e0e72e65e314db546ee3bc","indexName":"a11y-guidelines-orange","inputSelector":"#search-input","algoliaOptions":{"facetFilters":["language:en"]},"debug":false});
    </script>
    <div id="a11y_heading_anchor_label" hidden>Anchor link</div>
    <!--  This file is part of a11y-guidelines | Our vision of mobile & web accessibility guidelines and best practices, with valid/invalid examples. Copyright (C) 2016 - 2021 Orange SA. See the Creative Commons Legal Code Attribution-ShareAlike 3.0 Unported License for more details (LICENSE file). -->

  </body>
</html>
